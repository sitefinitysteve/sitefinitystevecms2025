{
    "title": "Personalization Problems with the Sitefinity API",
    "needsFixing": false,
    "content": "Just gonna leave this here first  \n[https://feedback.progress.com/Project/153/feedback/Details/259791-expose-a-parameterless-getusersegment-so-we-can-programatically-work-with-persona](https://feedback.progress.com/Project/153/feedback/Details/259791-expose-a-parameterless-getusersegment-so-we-can-programatically-work-with-persona)  \n  \nSo the personalization UI in sitefinity is pretty slick, you can see the docs and demos.Â  The basic idea is when you personalize something in the UI it renders blank on the page, and depending on segment match, the result is delivered through an XHR callback.  \n  \nIf you need to make a custom widget personalizable it\u0027s equally as simple, just inherit from IPersonalizable on the Controller and SF will handle the rest.Â  I don\u0027t believe there\u0027s even anything to implement.Â  The page editor UI will just allow you to create variants for the different segments.  \n  \nNow you\u0027re all pumped up to maybe extend it further with some custom code right?! If in segment1 do X, else if in segment2 do Y?  \n  \nWell, you can\u0027t...Â ðŸ¤· As a developer, this kinda suck... bad.Â  One would even think when bidding on a contract and selling features you would ASSUME this would work.  \n  \nThe core issue is that Sitefinity sees personalization as something that comes from a **page or a widget**; it\u0027s page-centric if you will.  \n  \nThere\u0027s only 1 real method to query to see if a user is in a segment  \npublic ISegment GetUserSegment(Guid pageDataId)  \n  \nSo lets unpack what that means.Â  It means you need to get a PageData object from a page which has been personalized, and the function will look at which segments are on that page, and return to you the segment to which they belong.  \n  \nWHICH MEANS  \n  \nYou can\u0027t programatically access personalization in Sitefinity (easily).Â  If you have 10 segments and just need to find where someone belongs, you need to make a dummy page, apply the segments to that, just so you can run this function. Add a new segment, don\u0027t forget to edit the dummy page... painful right, it\u0027s a hack and as a developer it makes you look bad when the client was sold on this cool tech.  \n  \nUser segments should be available to use as developers to use like a Dynamic Role.Â  I should literally be able to do that IF\\\\ELSE logic in my code to check segments and tailor content outside of the SF personalization UI.Â  The system is supposed to be extensible, this is a massive blocker.  \n  \nThere should be something like:  \nmanager.GetUserSegment(); //Parameterless  \nor  \nmanager.GetUserSegments(); // \u003c- Returns all matches sorted by the priority  \n  \nObviously there\u0027s some segment types which make no sense because they are page specific.Â  But like Location, IP, Previous page visits, profile matches, etc... these things are very useful for us as developers to solve issues for clients.  \n  \nPlease vote  \n[https://feedback.progress.com/Project/153/feedback/Details/259791-expose-a-parameterless-getusersegment-so-we-can-programatically-work-with-persona](https://feedback.progress.com/Project/153/feedback/Details/259791-expose-a-parameterless-getusersegment-so-we-can-programatically-work-with-persona)",
    "featuredImage": "/images/stock/500x280/img6.jpg",
    "seoDescription": "Personalization API in sitefinity is unfortunately tied to PageData",
    "seoMetaImage": "/images/stock/500x280/img6.jpg",
    "publishedAt": "2019-05-22T18:10:36.7270000Z",
    "slug": "personalization-issues-with-sitefinity-api",
    "legacyUrl": "/code/2019/05/22/programmatic-personalization-problem-with-the-sitefinity-api",
    "markdown": true,
    "tags": [
        "Rants"
    ]
}